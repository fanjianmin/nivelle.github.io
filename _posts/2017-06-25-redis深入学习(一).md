---
layout: post
title:  "redis深入学习(一)"
date:   2017-07-24 01:06:05
categories: noSQL
tags: redis
excerpt: redis
---


* content
{:toc}


### 简单动态字符串

当redis需要的不仅仅是一个字符串字面量,而是一个可以被修改的字符串值时,Redis就会使用SDS来表示字符串值,在Redis数据库里面,包含字符串值的键值对在底层都是由SDS实现的.(SDS:简单动态字符串)

例子:

redis> Set msg "hello world"

ok

其中:

- 键值对的键是一个字符串对象,对象的底层是一个保存着字符串"msg"的SDS

- 键值对的值也是一个字符串对象,对象的底层实现是一个保存着字符串"hello world"的SDS

redis> RPUSH fruits "apple" "banana" "cherry"

其中:

- 键值对的键是一个字符串对象,对象的底层实现是一个保存了字符串"fruits"的SDS

- 键值对的值是一个列表对象,列表对象包含了三个字符串对象,这三个字符串对象分别由三个SDS实现:分别是保存着"apple","banana","cherry"的三个SDS字符串


### SDS定义

每个sds.h/sdshdr结构表示一个SDS值:

```

struct sdshdr{
  //记录buf数组中已经使用的字节的数量
  //等于SDS所保存字符串的长度
  int len;

  //记录buf数组中未使用的字节的数量
  int free;

  //字节数组,用于保存字符串
  char buf[];
}



```
